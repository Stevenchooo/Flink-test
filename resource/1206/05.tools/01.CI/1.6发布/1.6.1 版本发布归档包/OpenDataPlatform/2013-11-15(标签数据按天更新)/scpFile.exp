#!/usr/bin/expect
set fileName "[lindex $argv 0]"
set userName "[lindex $argv 1]"
set ipAddress "[lindex $argv 2]"
set destDir "[lindex $argv 3]"
set userPassWd "[lindex $argv 4]"
set timeout 6000
spawn scp -r $fileName $userName@$ipAddress:$destDir
expect {
"assword: " {
send "$userPassWd\r"
exp_continue
}
"*yes/no*" {
send "yes\r"
exp_continue
expect "*assword: "
send "$userPassWd\r"
}
}
