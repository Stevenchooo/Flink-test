{
"name": "管理员管理",

"methods": [
    {
        "name":"/api/admin/create",
        "authType" : "user",
        "dataType":"admin",
        "operation":"c",
        "type" : "AUTHRDB",
            
        "request" : {
            "parameters" : [
                {"name":"creator", "type":"ACCOUNT", "desc":"账号"},
                {"name":"pid", "type":"INT", "must":true, "desc":"父模型ID"},
                {"name":"account", "type":"STR", "must":true, "desc":"被付权用户账号"},
                {"name":"role", "type":"STR", "must":true, "desc":"角色"}
            ]
        },
        
        "process" : {
            "sql" : "{call sp_adminCreate(?,?,?,?,?)}"
        },
        
        "response" : {
            "results" : [
                {
                    "name" : "result",
                    "merge" : true,
                    "segments" : [
                        {"name":"id", "type":"INT", "must":true, "desc":"模型id"}
                    ]
                }
            ]
        }
    },
     {
        "name":"/api/admin/queryAccount",
        "authType" : "user",
        "dataType":"admin",
        "operation":"r",
        "type" : "AUTHRDB",
            
        "request" : {
            "parameters" : [
                {"name":"pid", "type":"INT", "must":true, "desc":"父模型ID"}
            ]
        },
        
        "process" : {
            "sql" : "{call sp_adminQueryAccounts(?,?)}"
        },
        
        "response" : {
            "results" : [
                {
                    "name" : "result",
                    "multi" : true,
                    "segments" : [
                        {"name":"id", "type":"STR", "must":true, "desc":"账号ID"},
                        {"name":"name", "type":"STR", "must":true, "desc":"账号名称"}
                    ]
                }
            ]
        }
    },
    
    {
        "name":"/api/admin/remove",
        "authType" : "user",
        "type" : "AUTHRDB",
        "dataType":"admin",
        "operation":"d",
        
        "request" : {
            "parameters" : [
                {"name":"id", "type":"INT", "must":true, "desc":"数据ID"},
                {"name":"pid", "type":"INT", "must":true, "desc":"模型/菜单ID", "index":0}
            ]
        },
        
        "process" : {
            "sql" : "{call sp_modelRemove(?,?)}"
        }
    },
    
    
    {
        "name":"/api/admin/modify",
        "authType" : "user",
        "dataType":"admin",
        "operation":"u",
        "type" : "AUTHRDB",
        
        "request" : {
            "parameters" : [
                {"name":"account", "type":"STR", "desc":"账号"},
                {"name":"id", "type":"INT", "must":true, "desc":"管理员对应模型ID"},
                {"name":"role", "type":"STR", "must":true, "desc":"角色"}
            ]
        },
        
        "process" : {
            "sql" : "{call sp_adminModify(?,?,?,?)}"
        }
    },

    {
        "name":"/api/admin/detail",
        "authType" : "user",
        "dataType":"admin",
        "operation":"r",
        "type": "AUTHRDB",
            
        "request" : {
            "parameters" : [
                {"name":"id", "type":"INT", "must":true, "desc":"管理员对应模型ID"}
            ]
        },
        
        "process" : {
            "sql" : "select name as 'account', val as 'role' from t_ms_model where id=?"
        },
        
        "response" : {
            "results" : [
                {
                    "name" : "result",
                    "merge" : true,
                    "segments" : [
                        {"name":"account", "type":"STR", "desc":"账号"},
                        {"name":"role", "type":"STR", "desc":"角色"}
                    ]
                }
            ]
        }
    },
    
    {
        "name":"/api/admin/checkRight",
        "type": "RDB",
        "authType":"user",
        
        "request" : {
            "parameters" : [
                {"name":"account", "type":"ACCOUNT", "must":true, "desc":"账号"},
                {"name":"pid", "type":"INT", "must":true, "desc":"管理员对应模型ID"},
                {"name":"meta", "type":"STR", "must":true, "desc":"类型"}
            ]
        },
        
        "process" : {
            "ehcache":"rightCache",
            "sql" : "{call sp_adminRight(?,?,?,?)}"
        },
        
        "response" : {
            "results" : [
                {
                    "name" : "result",
                    "merge" : true,
                    "segments" : [
                        {"name":"userRight", "type":"STR", "desc":"权限描述|c|r|u|d|"},
                        {"name":"scopeId", "type":"INT", "desc":"获得权限的模型id"}
                    ]
                }
            ]
        }
    },

    {
        "name":"/api/admin/models",
        "type" : "AUTHRDB",
        "authType" : "user",
        "desc":"管理的模型，用来生产树的根目录",
        "writeLog":false,
        
        "process" : {
            "sql" : "none",
            "processor":"com.huawei.manager.base.api.AdminModels"
        },
        
        "response" : {
            "results" : [
                {
                    "name" : "models",
                    "multi": true,
                    "segments" : [
                        {"name":"id", "type":"INT", "desc":"模型id"},
                        {"name":"meta", "type":"STR", "desc":"类型"},
                        {"name":"name", "type":"STR", "desc":"模型名称"}
                    ]
                }
            ]
        }
    }
]
}