
{
"name": "监控代码管理",

"methods": [
      {
        "name":"/api/monitorInfo/query",
        "authType": "user",
        "type" : "AUTHRDB",
        "writeLog":true,
        "dataType":"monitorInfo",
        "operation":"r",
        
        "request" : {
            "parameters" : [
                {"name":"pOperator", "type":"ACCOUNT", "desc":"操作人账号"},
                {"name":"mktId", "type":"INT", "desc":"活动ID"},
                {"name":"adState", "type":"INT", "desc":"广告位状态"},
                {"name":"monitorPlatform", "type":"INT", "desc":"监控平台"},
                {"name":"adInfoWebName", "type":"INT", "desc":"网站名称"},
                {"name":"adInfoPort", "type":"INT", "desc":"端口所属"},
                {"name" : "inputUser", "type":"STRING", "desc":"录入人"},
                {"name" : "landPlatform","type" : "STRING","desc" : "着陆平台"},
                {"name" : "adqueryDateBeginDay", "type":"STRING", "desc":"更新周期开始日期"},
                {"name" : "adqueryDateEndDay", "type":"STRING", "desc":"更新周期结束日期"},
                {"name":"from", "type":"INT", "default":0, "min":0, "desc":"开始行号"},
                {"name":"perPage", "type":"INT", "default":10, "min":5, "max":100, "desc":"每页显示行数"}
            ]
        },
        
        "process" : {
            "sql" : "{call sp_monitorInfoQuery(?,?,?,?,?,?,?,?,?,?,?,?,?)}"
        },
        
        "response" : {
            "results" : [
                {
                    "name" : "result",
                    "multi" : true,
                    "segments" : [
                        {"name":"adInfoId", "type":"INT", "desc":"广告位ID"},
                        {"name":"adInfoWebName", "type":"STRING", "desc":"网站名称"},
                        {"name":"adInfoChannel", "type":"STRING", "desc":"频道"},
                        {"name":"adInfoPosition", "type":"STRING", "desc":"广告位"},
                        {"name":"adInfoPort", "type":"STRING", "desc":"端口"},
                        {"name":"adInfoPlatform", "type":"STRING", "desc":"着落平台"},
                        {"name":"adInfoPlatformDesc", "type":"STRING",  "desc":"平台描述"},
                        {"name":"adInfoDeliveryTimes", "type":"STRING", "desc":"投入数据"},
                        {"name":"adInfoMonitorPlatform", "type":"STRING",  "desc":"监控平台"},
                        {"name":"adInfoState", "type":"STRING", "desc":"当前状态"},
                        {"name":"monitorBiCode", "type":"STRING", "desc":"BI代码"},
                        {"name":"monitorExposureUrl", "type":"STRING", "desc":"曝光URL"},
                        {"name":"monitorClickUrl", "type":"STRING", "desc":"点击URL"},
                        {"name":"adInfoFlowType", "type":"STRING", "desc":"引流类型"},
                        {"name":"mktLandInfoName", "type":"STRING", "desc":"活动名称"},
                        {"name":"adInfoStateId", "type":"INT", "desc":"活动状态ID"},
                        {"name":"cid", "type":"STRING", "desc":"CID"},
                        {"name":"landLink", "type":"STRING", "desc":"着陆链接"}
                    ]
                },
                
                {
                    "name" : "total",
                    "merge" : true,
                    "segments" : [
                        {"name":"total", "type":"INT", "desc":"总数"}
                    ]
                }
            ]
        }
    },
     {
        "name":"/api/monitor/detail",
        "type" : "AUTHRDB",
        "authType": "user",
        
        "request" : {
            "parameters" : [
                {"name":"pOperator", "type":"ACCOUNT", "desc":"操作人账号"},
                {"name":"adInfoId", "type":"INT", "desc":"广告位ID"}
            ]
        },
        
        "process" : {
            "sql" : "{call sp_monitorInfoDetail(?,?,?)}"
        },
        
        "response" : {
            "results" : [
                {
                    "name" : "monitorInfo",
                    "merge" : true,
                    "segments" : [
                        {"name":"monitorBiCode", "type":"STRING", "must":true, "desc":"BICode"},
                        {"name":"monitorExposureUrl", "type":"STRING", "must":true, "desc":"曝光URL"},
                        {"name":"monitorClickUrl", "type":"STRING", "must":true, "desc":"点击URL"}
                    ]
                }
            ]
        }
    }
    ,
    
    {
        "name":"/api/monitor/modify",
        "type" : "AUTHRDB",
        "authType": "user",
        "desc": "修改广告位",
        "dataType":"monitorInfo",
        "operation":"u",
        
        "request" : {
            "parameters" : [
                {"name":"pOperator", "type":"ACCOUNT", "desc":"操作人账号"},
                {"name":"adInfoId", "type":"INT", "must":true, "desc":"广告位ID"},
                {"name":"monitorBiCode", "type":"STRING", "desc":"BICode"},
                {"name":"monitorExposureUrl", "type":"STRING",  "desc":"曝光URL"},
                {"name":"monitorClickUrl", "type":"STRING", "desc":"点击URL"}
            ]
        },
        
        "process" : {
            "sql": "{call sp_monitorInfoModify(?,?,?,?,?,?)}"
        }
    },


    {
        "name":"/api/monitor/publish",
        "type" : "AUTHRDB",
        "authType": "user",
        "desc": "修改广告位",
        "dataType":"monitorInfo",
        "operation":"u",
        
        "request" : {
            "parameters" : [
                {"name":"adInfoId", "type":"INT", "must":true, "desc":"广告位ID"},
                 {"name":"pOperator", "type":"ACCOUNT", "desc":"操作人账号"}
            ]
        },
        
        "process" : {
            "sql": "{call sp_monitorInfoPublish(?,?,?)}"
        }
    },

    {
        "name":"/api/monitor/reset",
        "type" : "AUTHRDB",
        "authType": "user",
        "desc": "修改广告位",
        "dataType":"monitorInfo",
        "operation":"u",
        
        "request" : {
            "parameters" : [
                {"name":"pOperator", "type":"ACCOUNT", "desc":"操作人账号"},
                {"name":"adInfoId", "type":"INT", "must":true, "desc":"广告位ID"}
            ]
        },
        
        "process" : {
            "sql": "{call sp_monitorInfoDel(?,?,?)}"
        }
    },
    
   
    {
        "name":"/api/monitor/batchPublish",
        "authType": "user",
        "type" : "AUTHRDB",
        "writeLog":true,
        "dataType":"monitorInfo",
        "operation":"r",
        
        "request" : {
            "parameters" : [
                {"name":"pOperator", "type":"ACCOUNT", "desc":"操作人账号"},
                {"name":"mktId", "type":"INT", "desc":"活动ID"},
                {"name":"adState", "type":"INT", "desc":"广告位状态"},
                {"name":"monitorPlatform", "type":"INT", "desc":"监控平台"},
                {"name":"adInfoWebName", "type":"INT", "desc":"网站名称"},
                {"name":"adInfoPort", "type":"INT", "desc":"端口所属"},
                {"name" : "inputUser", "type":"STRING", "desc":"录入人"},
                {"name" : "landPlatform","type" : "STRING","desc" : "着陆平台"},
                {"name" : "adqueryDateBeginDay", "type":"STRING", "desc":"更新周期开始日期"},
                {"name" : "adqueryDateEndDay", "type":"STRING", "desc":"更新周期结束日期"},
                
            ]
        },
        
        "process" : {
            "processor": "com.huawei.manager.mkt.api.BatchPublish",
            "sql" : "{call sp_monitorInfoQueryBatchAdinfoId(?,?,?,?,?,?,?,?,?,?,?)}"
        },
        
        "response" : {
            "results" : [
                {
                    "name" : "result",
                    "multi" : true,
                    "segments" : [
                        {"name":"adInfoId", "type":"INT", "desc":"广告位ID"}
                    ]
                }                
            ]
        }
    },{
            "name" : "/api/monitorInfo/queryMktMonitorEmailUserInfo",
            "authType" : "user",
            "type" : "AUTHRDB",
            "writeLog" : true,

            "request" : {
                "parameters" : [{
                            "name" : "mktId",
                            "type" : "STRING",
                            "desc" : "营销活动ID"
                        }
                    ]
            },

            "process" : {
                
                "sql" : "{call sp_mktMonitorEmailUserInfo(?,?)}"
            },

            "response" : {
                "results" : [{
                        "name" : "result",
                        "multi" : true,
                        "segments" : [{
                                "name" : "account",
                                "type" : "STRING",
                                "desc" : "用户账号"
                            }, {
                                "name" : "name",
                                "type" : "STRING",
                                "desc" : "姓名"
                            }, {
                                "name" : "department",
                                "type" : "STRING",
                                "desc" : "部门"
                            }
                        ]
                    }
                ]
            }
        }, {
            "name" : "/api/monitorInfo/emailMonitorUsers",
            "authType" : "user",
            "type" : "AUTHRDB",
            "writeLog" : true,
            "dataType" : "adInfo",
            "operation" : "r",

            "request" : {
                "parameters" : [{
                        "name" : "pOperator",
                        "type" : "ACCOUNT",
                        "desc" : "操作人账号"
                    }, {
                        "name" : "mktId",
                        "type" : "INT",
                        "desc" : "活动ID"
                    }, {
                        "name" : "adState",
                        "type" : "INT",
                        "desc" : "广告位状态"
                    }, {
                        "name" : "adInfoWebName",
                        "type" : "INT",
                        "desc" : "网站名称"
                    }, {
                        "name" : "adInfoPort",
                        "type" : "INT",
                        "desc" : "端口所属"
                    }, {
                        "name" : "inputUser",
                        "type" : "STRING",
                        "desc" : "录入人"
                    },  
                    {
                        "name" : "adInfoDeliveryBeginDay",
                        "type" : "STRING",
                        "desc" : "投放开始日期"
                    }, {
                        "name" : "adInfoDeliveryEndDay",
                        "type" : "STRING",
                        "desc" : "投放结束日期"
                    },                    
                     {
                        "name" : "adqueryDateBeginDay",
                        "type" : "STRING",
                        "desc" : "更新周期开始日期"
                    }, {
                        "name" : "adqueryDateEndDay",
                        "type" : "STRING",
                        "desc" : "更新周期结束日期"
                    }, {
                        "name" : "adExportType",
                        "type" : "INT",
                        "desc" : "导出类型"
                    }, {
                        "name" : "landPlatform",
                        "type" : "STRING",
                        "desc" : "着陆平台"
                    }
                ]
            },

            "process" : {
                "processor" : "com.huawei.manager.mkt.api.EmailMktAllUserList",
                "sql" : "{call sp_adInfoExportQuery(?,?,?,?,?,?,?,?,?,?,?,?,?)}"
            },

            "response" : {
                "results" : [{
                        "name" : "result",
                        "multi" : true,
                        "segments" : [{
                                "name" : "adInfoId",
                                "type" : "INT",
                                "desc" : "广告位ID"
                            }, {
                                "name" : "mktinfoName",
                                "type" : "STRING",
                                "desc" : "营销活动名称"
                            }, {
                                "name" : "adInfoWebName",
                                "type" : "STRING",
                                "desc" : "网站名称"
                            }, {
                                "name" : "adInfoChannel",
                                "type" : "STRING",
                                "desc" : "频道"
                            }, {
                                "name" : "adInfoPosition",
                                "type" : "STRING",
                                "desc" : "广告位"
                            }, {
                                "name" : "materialType",
                                "type" : "STRING",
                                "desc" : "广告素材类型"
                            }, {
                                "name" : "materialDesc",
                                "type" : "STRING",
                                "desc" : "素材要求"
                            }, {
                                "name" : "materialState",
                                "type" : "STRING",
                                "desc" : "素材状态"
                            }, {
                                "name" : "adInfoPort",
                                "type" : "STRING",
                                "desc" : "端口"
                            }, {
                                "name" : "adInfoPlatform",
                                "type" : "STRING",
                                "desc" : "着落平台"
                            }, {
                                "name" : "adInfoPlatformDesc",
                                "type" : "STRING",
                                "desc" : "平台描述"
                            }, {
                                "name" : "adInfoDeliveryDays",
                                "type" : "STRING",
                                "desc" : "投放天数"
                            }, {
                                "name" : "adInfoDeliveryTimes",
                                "type" : "STRING",
                                "desc" : "投入天数"
                            }, {
                                "name" : "operator",
                                "type" : "STRING",
                                "desc" : "投放人"
                            }, {
                                "name" : "updateTime",
                                "type" : "STRING",
                                "desc" : "更新日期"
                            }, {
                                "name" : "adInfoFlowType",
                                "type" : "STRING",
                                "desc" : "引流类型"
                            }, {
                                "name" : "expAmount",
                                "type" : "STRING",
                                "desc" : "预计曝光量"
                            }, {
                                "name" : "clickAmount",
                                "type" : "STRING",
                                "desc" : "预计点击量"
                            }, {
                                "name" : "publishPrice",
                                "type" : "STRING",
                                "desc" : "刊例价"
                            }, {
                                "name" : "netPrice",
                                "type" : "STRING",
                                "desc" : "净价"
                            }, {
                                "name" : "adInfoResource",
                                "type" : "STRING",
                                "desc" : "资源来源"
                            }, {
                                "name" : "isExposure",
                                "type" : "STRING",
                                "desc" : "是否监控曝光"
                            }, {
                                "name" : "isClick",
                                "type" : "STRING",
                                "desc" : "是否监控点击"
                            }, {
                                "name" : "monitorPlatform",
                                "type" : "STRING",
                                "desc" : "监控平台"
                            }, {
                                "name" : "sid",
                                "type" : "STRING",
                                "desc" : "sid"
                            }, {
                                "name" : "cpsName",
                                "type" : "STRING",
                                "desc" : "cps提供商名称"
                            }, {
                                "name" : "source",
                                "type" : "STRING",
                                "desc" : "source"
                            },
                              {
                                "name" : "channelName",
                                "type" : "STRING",
                                "desc" : "渠道名称"
                            }, {
                                "name" : "channel",
                                "type" : "STRING",
                                "desc" : "channel"
                            }, {
                                "name" : "cid",
                                "type" : "STRING",
                                "desc" : "cid"
                            }, {
                                "name" : "landUrl",
                                "type" : "STRING",
                                "desc" : "着陆链接"
                            }, 
                            {
                                "name" : "biCode",
                                "type" : "STRING",
                                "desc" : "监控代码"
                            },
                            {
                                "name" : "monitorExposureUrl",
                                "type" : "STRING",
                                "desc" : "曝光链接"
                            }, {
                                "name" : "monitorClickUrl",
                                "type" : "STRING",
                                "desc" : "监控点击链接"
                            }, {
                                "name" : "adInfoState",
                                "type" : "STRING",
                                "desc" : "当前状态"
                            }
                        ]
                    }, {
                        "name" : "adExportType",
                        "merge" : true,
                        "segments" : [{
                                "name" : "adExportType",
                                "type" : "INT",
                                "desc" : "导出类型"
                            }
                        ]
                    }
                ]
            }
        }
    
    
  ]
}

