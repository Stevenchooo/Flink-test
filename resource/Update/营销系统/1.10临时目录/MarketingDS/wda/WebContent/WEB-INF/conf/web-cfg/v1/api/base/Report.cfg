{
"name": "系统模型管理",

"methods": [
    {
        "type" : "AUTHRDB",
        "name":"/api/report/items",
        "writeLog":false,
        
        "request" : {
            "parameters" : [
                {"name":"id", "type":"INT", "must":true, "min":1, "desc":"服务器id"}
            ]
        },
        
        "process" : {
            "sql" : "select id, meta, name, val from t_ms_model where pid=?"
        },
        
        "response" : {
            "results" : [
                {
                    "name" : "items",
                    "multi" : true,
                    "segments" : [
                        {"name":"id", "type":"INT", "desc":"监控项ID"},
                        {"name":"meta", "type":"STR", "desc":"监控类型"},
                        {"name":"name", "type":"STR", "desc":"监控标识"},
                        {"name":"val", "type":"STR", "desc":"监控值"}
                    ]
                }
            ]
        }
    },
     
    {
        "name":"/api/report/data",
        "type" : "AUTHRDB",
        "writeLog":false,
        
        "request" : {
            "parameters" : [
                {"name":"account", "type":"ACCOUNT", "desc":"账号"},
                {"name":"serverId", "type":"INT", "must":true, "min":1, "desc":"服务器id"},
                {"name":"itemId", "type":"INT", "must":true, "min":1, "desc":"报表项id"},
                {"name":"startTime", "type":"DATE", "must":true, "min":"2013-01-01 00:00:00+0800", "desc":"开始时间"},
                {"name":"endTime", "type":"DATE", "must":true, "desc":"结束时间"}
            ]
        },
        
        "process" : {
            "sql" : "{call sp_reportData(?,?,?,?,?,?)}"
        },
        
        "response" : {
            "results" : [
                {
                    "name" : "itemId",
                    "merge" : true,
                    "segments" : [
                        {"name":"id", "type":"INT", "desc":"报表项ID"},
                        {"name":"name", "type":"STR", "desc":"报表项名称"}
                    ]
                },
                
                {
                    "name" : "data",
                    "multi" : true,
                    "array" : true,
                    "segments" : [
                        {"name":"time", "type":"DATE", "format":"timestamp", "desc":"上报时间"},
                        {"name":"val", "type":"FLOAT", "desc":"上报值"}
                    ]
                }
            ]
        }
    }
]
}