
<style>
DIV, UL, LI, SPAN {
	PADDING-RIGHT: 0px;
	PADDING-LEFT: 0px;
	PADDING-BOTTOM: 0px;
	MARGIN: 0px;
	PADDING-TOP: 0px
}

UL {
	LIST-STYLE-TYPE: none
}

.head {
	OVERFLOW: hidden;
	WIDTH: 228px;
	_WIDTH: 221px;
}

.head UL {
	BACKGROUND: #eee;
	HEIGHT: 24px;
	border-bottom: #CCC 1px solid;;
	border-top: #CCC 1px solid;;
	border-right: #CCC 1px solid
}

.head UL LI {
	FONT-WEIGHT: 700;
	FLOAT: left;
	WIDTH: 100px;
	COLOR: #666;
	LINE-HEIGHT: 24px;
	HEIGHT: 24px;
	TEXT-ALIGN: center;
	font-size: 12px;
	border-left: #CCC 1px solid;
	overflow: hidden
}

.body {
	OVERFLOW: hidden;
	WIDTH: 228px;
	_WIDTH: 221px;
}

.body UL LI {
	BACKGROUND: #fff;
	OVERFLOW: hidden;
	border-bottom: #CCC 1px solid;
	border-right: #CCC 1px solid;
	float: left;
}

.body UL LI span {
	width: 98px;
	_width: 100px;
	background-color: #F90;
	font-size: 12px;
	padding-left: 2px;
	border-left: #CCC 1px solid;
	float: left;
	height: 27px;
	line-height: 27px;
	overflow: hidden
}
</style>

<!-- Content Wrapper. Contains page content -->
<div class="content-wrapper" ng-controller="AreaDistributionCtrl">

	<!-- Content Header (Page header) -->
	<section class="content-header" style="padding: 0 15px 0 15px;">
		<h5>地域分布</h5>
	</section>

	<section class="content">
		<!-- Info boxes -->
		<div class="row">
			<div class="col-md-12">
				<div class="box"
					style="border-top: 0px; margin-bottom: 15px; background: #ffffff;">
					<div class="box-header" style="padding: 0px;">
						<ul class="nav nav-pills">
							<li ng-class='{"active":period==0}'><a href
								ng-click="selectTimePeriod(0)">今天</a></li>
							<li ng-class='{"active":period==-1}'><a href
								ng-click="selectTimePeriod(-1)">昨天</a></li>
							<li ng-class='{"active":period==-7}'><a href
								ng-click="selectTimePeriod(-7)">最近7天</a></li>
							<li ng-class='{"active":period==-30}'><a href
								ng-click="selectTimePeriod(-30)">最近30天</a></li>

							<!-- 迭代2 TODO -->
							<li style="margin-left: 5px; padding: 10px 15px;"><input
								date-range-picker class="form-control date-picker" size="22"
								type="text" ng-model="datePicker.date" options="opts"
								ng-change="timePickerChange()" /></li>


							<li style="padding: 10px 1px 10px 1px;"><label
								class="i-checks i-checks-sm checkbox-inline"> <input
									type="checkbox" ng-model="isHuanBi" ng-change="huanbi()" /><i></i>对比
							</label></li>
							<li ng-show="isHuanBi" style="padding: 10px 1px 10px 1px;">
								<input date-range-picker class="form-control date-picker"
								size="22" type="text" ng-model="datePicker.date1" options="opts"
								ng-change="compareTimePeriodSelect()" />
							</li>
						</ul>
					</div>
				</div>
			</div>
		</div>


		<div class="row">
			<div class="col-md-4 col-sm-6 col-xs-12">
				<div class="info-box">
					<span class="info-box-icon bg-aqua"><i
						class="ion ion-ios-browsers-outline"></i></span>
					<div class="info-box-content">
						<span class="info-box-text">浏览量(PV)</span> <span
							class="info-box-number">{{summaryData.pv | formatnumber}}</span>
						<span ng-show="isHuanBi" class="info-box-number text-muted">{{huanBiSummaryData.pv
							| formatnumber}}</span>
					</div>
					<!-- /.info-box-content -->
				</div>
				<!-- /.info-box -->
			</div>
			<!-- /.col -->
			<div class="col-md-4 col-sm-6 col-xs-12">
				<div class="info-box small">
					<span class="info-box-icon bg-red"><i
						class="ion ion-ios-clock-outline"></i></span>
					<div class="info-box-content">
						<span class="info-box-text">平均访问时长</span> <span
							class="info-box-number">{{summaryData.avg_visit_time |
							formatSecond}}</span> <span ng-show="isHuanBi"
							class="info-box-number text-muted">{{huanBiSummaryData.avg_visit_time
							| formatSecond}}</span>
					</div>
					<!-- /.info-box-content -->
				</div>
				<!-- /.info-box -->
			</div>
			<!-- /.col -->
			<div class="col-md-4 col-sm-6 col-xs-12">
				<div class="info-box">
					<span class="info-box-icon bg-green"><i
						class="ion ion-ios-paper-outline"></i></span>
					<div class="info-box-content">
						<span class="info-box-text">平均访问页面</span> <span
							class="info-box-number">{{summaryData.avg_visit_pages |
							formatnumber}}</span> <span ng-show="isHuanBi"
							class="info-box-number text-muted">{{huanBiSummaryData.avg_visit_pages
							| formatnumber}}</span>
					</div>
					<!-- /.info-box-content -->
				</div>
				<!-- /.info-box -->
			</div>
			<!-- /.col -->
		</div>
		<!-- /.row -->

		<div class="row" style="padding-bottom: 0px;">
			<div class="col-md-12">
				<div class="box box-primary">
					<div class="box-header" style="padding-bottom: 0px;">

						<ul class="nav navbar-nav hidden-sm">
							<li class="dropdown pos-stc" dropdown><a href
								class="dropdown-toggle" dropdown-toggle
								style="padding-top: 0; padding-bottom: 0;"> 指标：<span
									class="text-danger" style="font-size: 12px;"
									ng-repeat="d in data"> {{d.key}} {{$last ? '' : '，'}}</span> <span
									class="caret"></span>
							</a>

								<div class="dropdown-menu wrapper bg-white"
									style="opacity: 0.95; width: 40%;"
									onclick="event.stopPropagation();">
									<div class="row wrapper">
										<div class="col-xs-12">
											<ul class="nav nav-pills list-unstyled list-inline"
												style="padding-left: 20px; padding-right: 20px">
												<li class="col-xs-4" ng-repeat="item in allOptions"
													style="margin-left: 20px; margin-right: 20px"
													id="{{item.key}}"><input type="checkbox"
													ng-disabled="item.value == 'conversions' ? true : false"
													ng-change="sync(item.checked, item)"
													ng-model="item.checked">{{item.key}}</li>
											</ul>
										</div>
									</div>

									<div class="row">
										<div class="col-sm-12 b-l text-right b-light">
											(可同时选择{{canSelectedKpi}}项)</div>
									</div>
								</div> <!--  /dropdown-menu  --></li>
						</ul>
					</div>
					<!-- /.box-header -->

					<div class="box-body" style="padding-top: 0px;">
						<div class="row">
							<div class="col-md-4" style="border: 2px solid #f4f4f4;">
								<div id="areaDisMap" style="width: 100%; height: 400px;"></div>
							</div>
							<div class="col-md-4" style="border: 2px solid #f4f4f4;">
								<div id="areaDisPie" style="width: 100%; height: 400px;"></div>
							</div>

							<div class="col-md-4">
								<div>
									<span>(地域/指标/占比)</span>
									<ul>
										<li ng-repeat="row in area_distribution_map_data"
											style="FLOAT: left; WIDTH: 150px; TEXT-ALIGN: left; font-size: 12px; HEIGHT: 25px; border-bottom: #CCC 1px solid; border-top: #CCC 0px solid; overflow: hidden">
											<span style="padding-right: 5px;">{{row.name}}</span> <span
											style="padding-right: 5px;">{{row.event |
												formatnumber}}</span> <span>{{row.event / totalKpi.totalKpi
												| percentage:2}} </span>
										</li>
									</ul>
								</div>
							</div>
							<!-- /.col -->


						</div>
						<!-- /.row -->
					</div>
					<!-- ./box-body -->
				</div>
				<!-- /.box -->
			</div>
			<!-- /.col -->
		</div>
		<!-- /.row -->


		<div class="row">
			<div class="col-md-12">
				<div class="box box-info">
					<div class="box-body">
						<div class="b-b b-light" style="padding-bottom: 8px;">
							<input id="filter" type="text" placeholder="  查询省份..."
								class="form-control input-sm w-sm inline m-r"
								style="padding: 2px;" ng-model="searchText" />
						</div>

						<table class="table m-b-none">
							<thead>
								<tr>
									<th data-sort-ignore="true">地域</th>
									<th data-sort-ignore="true"></th>
									<th data-sort-ignore="true">浏览量(PV)</th>
									<th data-sort-ignore="true">平均访问时长</th>
									<th data-sort-ignore="true">平均访问页面</th>
								</tr>
							</thead>
							<tbody>
								<tr
									ng-repeat="row in areaDistributionList | areaDistributionListFilter:areaDistributionList.curpage:15:searchText"
									style="font-size: 12px;">
									<td>
										<div>{{row.province_name}}</div>
										<div>{{selectDate | formatdate}}</div>
										<div ng-show="isHuanBi">{{selectHbDate | formatdate}}</div>
										<div ng-show="isHuanBi">变化率</div>
									</td>
									<td><a target="{{blank}}"
										ui-sref="app.area_trend({provinceName:row.province_name})"><i
											class="fa fa-line-chart"></i></a></td>

									<td>
										<div>&nbsp;</div>
										<div>
											{{row.pv | formatnumber}} <i ng-show="isHuanBi"
												ng-if="row.pv > area_distribution_list_hbdata[(areaDistributionList.curpage -1) * 15 +$index].pv"
												class="glyphicon glyphicon-arrow-up text-danger"></i> <i
												ng-show="isHuanBi"
												ng-if="row.pv < area_distribution_list_hbdata[(areaDistributionList.curpage -1) * 15 +$index].pv"
												class="glyphicon glyphicon-arrow-down text-success"></i>
										</div>
										<div ng-show="isHuanBi">{{area_distribution_list_hbdata[(areaDistributionList.curpage
											-1) * 15 +$index].pv | formatnumber}}</div>
										<div ng-show="isHuanBi">{{ (row.pv -
											area_distribution_list_hbdata[(areaDistributionList.curpage
											-1) * 15 +$index].pv) /
											area_distribution_list_hbdata[(areaDistributionList.curpage
											-1) * 15 +$index].pv | percentage:2}}</div>
									</td>

									<td>
										<div>&nbsp;</div>
										<div>
											{{row.avg_visit_time | formatSecond}} <i ng-show="isHuanBi"
												ng-if="row.avg_visit_time > area_distribution_list_hbdata[(areaDistributionList.curpage -1) * 15 +$index].avg_visit_time"
												class="glyphicon glyphicon-arrow-up text-danger"></i> <i
												ng-show="isHuanBi"
												ng-if="row.avg_visit_time < area_distribution_list_hbdata[(areaDistributionList.curpage -1) * 15 +$index].avg_visit_time"
												class="glyphicon glyphicon-arrow-down text-success"></i>
										</div>
										<div ng-show="isHuanBi">{{area_distribution_list_hbdata[(areaDistributionList.curpage
											-1) * 15 +$index].avg_visit_time | formatSecond}}</div>
										<div ng-show="isHuanBi">{{ (row.avg_visit_time -
											area_distribution_list_hbdata[(areaDistributionList.curpage
											-1) * 15 +$index].avg_visit_time) /
											area_distribution_list_hbdata[(areaDistributionList.curpage
											-1) * 15 +$index].avg_visit_time | percentage:2}}</div>
									</td>

									<td>
										<div>&nbsp;</div>
										<div>
											{{row.avg_visit_pages | formatnumber}} <i ng-show="isHuanBi"
												ng-if="row.avg_visit_pages > area_distribution_list_hbdata[(areaDistributionList.curpage -1) * 15 +$index].avg_visit_pages"
												class="glyphicon glyphicon-arrow-up text-danger"></i> <i
												ng-show="isHuanBi"
												ng-if="row.avg_visit_pages < area_distribution_list_hbdata[(areaDistributionList.curpage -1) * 15 +$index].avg_visit_pages"
												class="glyphicon glyphicon-arrow-down text-success"></i>
										</div>
										<div ng-show="isHuanBi">{{area_distribution_list_hbdata[(areaDistributionList.curpage
											-1) * 15 +$index].avg_visit_pages | formatnumber}}</div>
										<div ng-show="isHuanBi">{{ (row.avg_visit_pages -
											area_distribution_list_hbdata[(areaDistributionList.curpage
											-1) * 15 +$index].avg_visit_pages) /
											area_distribution_list_hbdata[(areaDistributionList.curpage
											-1) * 15 +$index].avg_visit_pages | percentage:2}}</div>
									</td>
								</tr>
							</tbody>
						</table>

						<div class="up-pager">
							<div class="uppg">
								<a href="javascript:void(0);" class="first-page"
									data-page="first" ng-click="selectPage(1)">首页</a> <a
									href="javascript:void(0);" class="uppg-prv"
									ng-click="selectPage(areaDistributionList.curpage - 1)">上一页</a>
								<a ng-repeat="p in areaDistributionList.showPage"
									href="javascript:void(0);" ng-class="setCurPage(p)"
									ng-click="selectPage(p)">{{p}}</a> <a
									href="javascript:void(0);" class="uppg-nt"
									ng-click="selectPage(areaDistributionList.curpage + 1)">下一页</a>
								<a href="javascript:void(0);" class="last-page" data-page="last"
									ng-click="selectPage(areaDistributionList.totalPage)">尾页</a>
							</div>
							<div class="pg-count">
								共<span class="pg-no">{{areaDistributionList.totalPage}}</span>页
							</div>
						</div>

					</div>

				</div>
			</div>
		</div>
	</section>
	<!-- /.content -->

</div>
<!-- /.content-wrapper -->


