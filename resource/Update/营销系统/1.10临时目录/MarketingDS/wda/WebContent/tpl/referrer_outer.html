


<!-- Content Wrapper. Contains page content -->
<div class="content-wrapper" ng-controller="ReferrerOuterCtrl" >
	<section class="content">
		<div class="row">
		
			<div class="col-md-3 col-sm-6 col-xs-12" style="margin-top:10px;padding-left:0px;">
              <div class="info-box">
                <span class="info-box-icon bg-aqua"><i class="ion ion-ios-browsers-outline"></i></span>
                <div class="info-box-content">
                  <span class="info-box-text">浏览量(PV)</span>
                  <span class="info-box-number">{{summaryData.pv | formatnumber}}</span>
                  <span ng-show="isHuanBi" class="info-box-number text-muted">{{huanBiSummaryData.pv | formatnumber}}</span>
                </div><!-- /.info-box-content -->
              </div><!-- /.info-box -->
            </div><!-- /.col -->  
            
			<div class="col-md-3 col-sm-6 col-xs-12" style="margin-top:10px;padding-left:0px;">
              <div class="info-box">
                <span class="info-box-icon bg-red"><i class="ion ion-forward"></i></span>
                <div class="info-box-content">
                  <span class="info-box-text">跳出率</span>
                  <span class="info-box-number">{{summaryData.bounce_rate | percentage:2}}</span>
                  <span ng-show="isHuanBi" class="info-box-number text-muted">{{huanBiSummaryData.bounce_rate | percentage:2}}</span>
                </div><!-- /.info-box-content -->
              </div><!-- /.info-box -->
            </div><!-- /.col -->
            
            <div class="col-md-3 col-sm-6 col-xs-12" style="margin-top:10px;padding-left:0px;">
              <div class="info-box">
                <span class="info-box-icon bg-green"><i class="ion ion-ios-clock-outline"></i></span>
                <div class="info-box-content">
                  <span class="info-box-text">平均访问时长</span>
                  <span class="info-box-number">{{summaryData.avg_visit_time | formatSecond}}</span>
                  <span ng-show="isHuanBi" class="info-box-number text-muted">{{huanBiSummaryData.avg_visit_time | formatSecond}}</span>
                </div><!-- /.info-box-content -->
              </div><!-- /.info-box -->
            </div><!-- /.col -->
            
            <div class="col-md-3 col-sm-6 col-xs-12" style="margin-top:10px;padding-left:0px;">
              <div class="info-box">
                <span class="info-box-icon bg-yellow"><i class="ion ion-ios-paper-outline"></i></span>
                <div class="info-box-content">
                  <span class="info-box-text">平均访问页面</span>
                  <span class="info-box-number">{{summaryData.avg_visit_pages | formatnumber}}</span>
                  <span ng-show="isHuanBi" class="info-box-number text-muted">{{huanBiSummaryData.avg_visit_pages | formatnumber}}</span>
                </div><!-- /.info-box-content -->
              </div><!-- /.info-box -->
            </div><!-- /.col -->
		</div> <!-- /.row -->
		
		<div class="row">
            <div class="col-md-12" style="margin-top:10px;padding-left:0px;">
              <div class="box box-primary">
                <div class="box-header">
                  
                  <ul class="nav navbar-nav hidden-sm">
					  <li class="dropdown pos-stc" dropdown>
					    <a href class="dropdown-toggle" dropdown-toggle style="padding-top:0; padding-bottom:0;">
					      	指标：<span class="text-danger" style="font-size:12px;" ng-repeat="d in data"> {{d.key}} {{$last ? '' : '，'}}</span>
					      	<span class="caret"></span>
					    </a>
					    
					    <div class="dropdown-menu wrapper bg-white" style="opacity:0.95; width:40%;" onclick="event.stopPropagation();">   
					      <div class="row wrapper">
					        <div class="col-xs-12">
					          <ul class="nav nav-pills list-unstyled list-inline" style="padding-left:20px;padding-right:20px">
					            <li class="col-xs-4" ng-repeat="item in allOptions" style="margin-left:20px;margin-right:20px" id="{{item.key}}">
					              <input type="checkbox" ng-disabled="item.value == 'orderQuantity' || item.value == 'orderAmount' || item.value == 'orderConversation' ? true : false" ng-change="sync(item.checked, item)" ng-model="item.checked">{{item.key}}
					            </li>
					          </ul>
					        </div>
					      </div>
					      
					      <div class="row">
					        <div class="col-sm-12 b-l text-right b-light">
					          (可同时选择{{canSelectedKpi}}项)
					        </div>
					      </div>
					     </div>   <!--  /dropdown-menu  --> 
					   </li>
					 </ul>
                </div><!-- /.box-header -->
                
                <div class="box-body">
                  <div class="row">
                  	<div class="col-md-3">
                  		<div id="refferOuterPie" style="width: 100%;height:400px;"></div>
                    </div><!-- /.col -->
                    
                    <div class="col-md-9" style="border:2px solid #f4f4f4;">
                    	<div id="refferOuterLine" style="width: 100%;height:400px;"></div>
                    </div><!-- /.col -->
                    
                  </div><!-- /.row -->
                </div><!-- ./box-body -->
              </div><!-- /.box -->
            </div><!-- /.col -->
          </div><!-- /.row -->
		  
			<div class="row">
		  		<div class="col-md-12" style="margin-top:10px;padding-left:0px;">
          			<div class="box box-info">
						<div class="box-body">
							<table class="table m-b-none">
						        <thead>
						          <tr>
						              <th data-sort-ignore="true">
						              	 访问来源
						              </th>
						              <th data-sort-ignore="true"></th>
						              <th data-sort-ignore="true">
										浏览量
						              </th>
						              <th data-sort-ignore="true">
										跳出率
						              </th>
						              <th data-sort-ignore="true">
										平均访问时长
						              </th>
						              <th data-sort-ignore="true">
										平均访问页面
						              </th>
						          </tr>
						        </thead>
						        <tbody>
						        	 <tr ng-repeat="row in referOuterJson | todayPageFilter:referOuterJson.curpage:15">  	
							          	<td>
							          		<div>{{row.referrer_name}}</div>
							          		<div>{{selectDate | formatdate}}</div>
							          		<div ng-show="isHuanBi">{{selectHbDate | formatdate}}</div>
							          		<div ng-show="isHuanBi">变化率</div>
						          		</td>
						          		
							          	<td>
							          		<div ng-if="!isHuanBi">
							          			<a target="{{blank}}" ui-sref='app.referrer_trend2({refName: row.referrer_name})'><i class='fa fa-line-chart'></i></a>
							          		</div>
							          		<div ng-if="isHuanBi">
							          			<div><a target="{{blank}}" ui-sref='app.referrer_trend2({refName: row.referrer_name})'><i class='fa fa-line-chart'></i></a></div>
							          			<div></div>
							          			<div></div>
							          			<div></div>
							          		</div>
							          	</td>
							          	
							          	<td>
							          		<div>&nbsp;</div>
							          		<div>
							          			{{row.pv | formatnumber}}
							          			<i ng-show="isHuanBi"  ng-if="row.pv > referrer_hbdata[(referOuterJson.curpage -1) * 15 +$index].pv" class="glyphicon glyphicon-arrow-up text-danger"></i>
							          			<i ng-show="isHuanBi"  ng-if="row.pv < referrer_hbdata[(referOuterJson.curpage -1) * 15 +$index].pv" class="glyphicon glyphicon-arrow-down text-success"></i>
							          		</div>
							          		<div ng-show="isHuanBi">{{referrer_hbdata[(referOuterJson.curpage -1) * 15 +$index].pv | formatnumber}}</div>
							          		<div ng-show="isHuanBi">{{ (row.pv - referrer_hbdata[(referOuterJson.curpage -1) * 15 +$index].pv) / referrer_hbdata[(referOuterJson.curpage -1) * 15 +$index].pv | percentage:2}}</div>
						          		</td>
							          	
							          	<td>
							          		<div>&nbsp;</div>
							          		<div>
							          			{{row.bounce_rate | percentage:2}}
							          			<i ng-show="isHuanBi"  ng-if="row.bounce_rate > referrer_hbdata[(referOuterJson.curpage -1) * 15 +$index].bounce_rate" class="glyphicon glyphicon-arrow-up text-danger"></i>
							          			<i ng-show="isHuanBi"  ng-if="row.bounce_rate < referrer_hbdata[(referOuterJson.curpage -1) * 15 +$index].bounce_rate" class="glyphicon glyphicon-arrow-down text-success"></i>
							          		</div>
							          		<div ng-show="isHuanBi">{{referrer_hbdata[(referOuterJson.curpage -1) * 15 +$index].bounce_rate | percentage:2}}</div>
							          		<div ng-show="isHuanBi">{{ (row.bounce_rate - referrer_hbdata[(referOuterJson.curpage -1) * 15 +$index].bounce_rate) / referrer_hbdata[(referOuterJson.curpage -1) * 15 +$index].bounce_rate | percentage:2}}</div>
						          		</td>
						          		
						          		<td>
							          		<div>&nbsp;</div>
							          		<div>
							          			{{row.avg_visit_time | formatSecond}}
							          			<i ng-show="isHuanBi"  ng-if="row.avg_visit_time > referrer_hbdata[(referOuterJson.curpage -1) * 15 +$index].avg_visit_time" class="glyphicon glyphicon-arrow-up text-danger"></i>
							          			<i ng-show="isHuanBi"  ng-if="row.avg_visit_time < referrer_hbdata[(referOuterJson.curpage -1) * 15 +$index].avg_visit_time" class="glyphicon glyphicon-arrow-down text-success"></i>
							          		</div>
							          		<div ng-show="isHuanBi">{{referrer_hbdata[(referOuterJson.curpage -1) * 15 +$index].avg_visit_time | formatSecond}}</div>
							          		<div ng-show="isHuanBi">{{ (row.avg_visit_time - referrer_hbdata[(referOuterJson.curpage -1) * 15 +$index].avg_visit_time) / referrer_hbdata[(referOuterJson.curpage -1) * 15 +$index].avg_visit_time | percentage:2}}</div>
						          		</td>
						          		
						          		<td>
							          		<div>&nbsp;</div>
							          		<div>
							          			{{row.avg_visit_pages | formatnumber}}
							          			<i ng-show="isHuanBi"  ng-if="row.avg_visit_pages > referrer_hbdata[(referOuterJson.curpage -1) * 15 +$index].avg_visit_pages" class="glyphicon glyphicon-arrow-up text-danger"></i>
							          			<i ng-show="isHuanBi"  ng-if="row.avg_visit_pages < referrer_hbdata[(referOuterJson.curpage -1) * 15 +$index].avg_visit_pages" class="glyphicon glyphicon-arrow-down text-success"></i>
							          		</div>
							          		<div ng-show="isHuanBi">{{referrer_hbdata[(referOuterJson.curpage -1) * 15 +$index].avg_visit_pages | formatnumber}}</div>
							          		<div ng-show="isHuanBi">{{ (row.avg_visit_pages - referrer_hbdata[(referOuterJson.curpage -1) * 15 +$index].avg_visit_pages) / referrer_hbdata[(referOuterJson.curpage -1) * 15 +$index].avg_visit_pages | percentage:2}}</div>
						          		</td>
					          		</tr>
						        	
						        	<!-- 
							        <tr ng-repeat="row in ref_list">
							          	<td class="info-box-text">
							          		<div ng-if="!isHuanBi">
							          			{{row.referrer_name}}
							          		</div>
							          		<div ng-if="isHuanBi">
							          			<div>{{row.referrer_name}}</div>
							          			<div>{{row.pt_d | formatdate}}</div>
							          			<div>{{row.pt_d2 | formatdate}}</div>
							          			<div>变化率</div>
							          		</div>
							          	</td>
							          	
							          	<td>
							          		<div ng-if="!isHuanBi">
							          			<a target="_blank" ui-sref='app.referrer_trend2({refName: row.referrer_name})'><i class='fa fa-line-chart'></i></a>
							          		</div>
							          		<div ng-if="isHuanBi">
							          			<div><a target="_blank" ui-sref='app.referrer_trend2({refName: row.referrer_name})'><i class='fa fa-line-chart'></i></a></div>
							          			<div></div>
							          			<div></div>
							          			<div></div>
							          		</div>
							          	</td>
							          	
							          	<td>
							          		<div ng-if="!isHuanBi">
							          			{{row.pv | formatnumber}}
							          		</div>
							          		<div ng-if="isHuanBi">
							          			<div>&nbsp;</div>
							          			<div>
							          			{{row.pv | formatnumber}}
							          			<i ng-show="row.pv > row.pv2" class="glyphicon glyphicon-arrow-up text-danger"></i>
						          				<i ng-show="row.pv < row.pv2" class="glyphicon glyphicon-arrow-down text-success"></i>
							          			</div>
							          			<div>{{row.pv2 | formatnumber}}</div>
							          			<div>{{ (row.pv - row.pv2) / row.pv2 | percentage:2}}</div>
							          		</div>
							          	</td>
							          	
							          	<td>
							          		<div ng-if="!isHuanBi">
							          			{{row.bounce_rate | percentage:2}}
							          		</div>
							          		<div ng-if="isHuanBi">
							          			<div>&nbsp;</div>
							          			<div>{{row.bounce_rate | percentage:2}}</div>
							          			<div>{{row.bounce_rate2 | percentage:2}}</div>
							          			<div>{{ (row.bounce_rate - row.bounce_rate2) / row.bounce_rate2 | percentage:2}}</div>
							          		</div>
							          	</td>
							          	
							          	<td>
							          		<div ng-if="!isHuanBi">
							          			{{row.avg_visit_time | formatSecond}}
							          		</div>
							          		<div ng-if="isHuanBi">
							          			<div>&nbsp;</div>
							          			<div>{{row.avg_visit_time | formatSecond}}</div>
							          			<div>{{row.avg_visit_time2 | formatSecond}}</div>
							          			<div>{{ (row.avg_visit_time - row.avg_visit_time2) / row.avg_visit_time2 | percentage:2}}</div>
							          		</div>
							          	</td>
							          	
							          	<td>
							          		<div ng-if="!isHuanBi">
							          			{{row.avg_visit_pages}}
							          		</div>
							          		<div ng-if="isHuanBi">
							          			<div>&nbsp;</div>
							          			<div>{{row.avg_visit_pages}}</div>
							          			<div>{{row.avg_visit_pages2}}</div>
							          			<div>{{ (row.avg_visit_pages - row.avg_visit_pages2) / row.avg_visit_pages2 | percentage:2}}</div>
							          		</div>
							          	</td>
					          		</tr>
					          		-->
						        </tbody>
						      </table>
						      <div class="up-pager">
						<div class="uppg">
							<a href="javascript:void(0);" class="first-page"
								data-page="first" ng-click="selectPage(1)">首页</a> <a
								href="javascript:void(0);" class="uppg-prv"
								ng-click="selectPage(referOuterJson.curpage - 1)">上一页</a> <a
								ng-repeat="p in referOuterJson.showPage" href="javascript:void(0);"
								ng-class="setCurPage(p)" ng-click="selectPage(p)">{{p}}</a> <a
								href="javascript:void(0);" class="uppg-nt"
								ng-click="selectPage(referOuterJson.curpage + 1)">下一页</a> <a
								href="javascript:void(0);" class="last-page" data-page="last"
								ng-click="selectPage(referOuterJson.totalPage)">尾页</a>

						</div>
						<div class="pg-count">
							共<span class="pg-no">{{referOuterJson.totalPage}}</span>页
						</div>
					</div>
						</div>
					</div>
				</div>
			</div>
		  
		  
	</section> <!-- /.content --> 
</div> <!-- /.content-wrapper -->


